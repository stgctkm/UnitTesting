# なぜ統合テストを行うのか
- 統合テスト
  - コントローラーに分類されるコードを検証する
  - 退行に対する保護とリファクタリングへの耐性を備える
  - 1件のハッピーパスおよび、単体テストで扱えなかった異常ケースを扱う
- 単体テスト
  - ドメインモデルに分類されるコードを検証する
  - 保守のしやすさと迅速なフィードバックを提供する
  - ビジネスシナリオにおける異常ケースを可能な限り多く扱う
- 早期失敗
- 管理下にある依存
  - データベース
- 管理下にない依存
  - メール、メッセージバス
- 管理下にある依存には実際の依存を使い、管理下にない依存にはモックを使う

- 実装クラスを1つしか持たないインターフェースは使わない
- 循環依存は使用しない
- 1つのテストケースに複数の実行フェーズを持つのはE2Eのみ
  - プロセス外依存に何らかの制限があって、自由に使えない場合のみ

- サポートログ/診断ログ
- サポートログ
  - 観察可能な振る舞い
  - テスト対象
- 診断ログ
  - 実装の詳細
  - テストしない